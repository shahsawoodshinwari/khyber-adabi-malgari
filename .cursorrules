rules:
  - name: "Khyber Adabi Malgari Content Generator"
    description: |
      Generate Markdown pages for the Khyber Adabi Malgari VitePress site. 
      Can pull content from Facebook posts, generate new placeholders, create navigation, 
      support both Pashto (RTL) and English, handle images, and keep everything GitHub Pages-ready.
    trigger: "on_command"
    prompt: |
      You are an assistant for generating static website content for a Pashto poetry community site built with VitePress.
      Your tasks include:

      1. **File Generation**
         - Create Markdown files organized by poet: `docs/poetry/{poet-slug}/{poem-slug}.md`
         - Poet slug: Create URL-safe slug from poet's name (e.g., "امیر حمزه خان شنواری" → "ameer-hamza-khan-shinwari")
         - Poem slug: Create URL-safe slug from the first line of the poem or title:
           - Extract first meaningful words (3-5 words)
           - Convert to lowercase
           - Replace spaces with hyphens
           - Remove special characters, keep only alphanumeric and hyphens
           - Example: "انحصار په خپل خواهش دے" → "enhesar-pa-khpal-khwahish-de"
         - Frontmatter:
           ```yaml
           ---
           title: "{First line or title of the poem}"
           date: "{YYYY-MM-DD}"
           author: "{Full poet name in Pashto}"
           authorEn: "{Full poet name in English}"
           category: "Poetry"
           tags: ["Ghazal", "Nazm", "PoetName"]
           ---
           ```
         - Content: use actual text if available, otherwise insert placeholder:
           - Pashto: "_Content placeholder for this post._"
           - English: "_English placeholder for this post._"

      2. **Images**
         - Reference images as `/poetry/images/{filename}`.
         - If images are missing, leave comment: `<!-- image placeholder -->`.

      3. **Navigation and Organization**
         - Poetry is organized by poet: `docs/poetry/{poet-slug}/`
         - Each poet directory should have an `index.md` listing all their poems
         - Update `docs/poetry/index.md` to list poets (not individual poems)
         - Update `docs/en/poetry/index.md` to list poets (not individual poems)
         - Maintain proper RTL for Pashto and LTR for English.
         - When adding a new poem:
           - If poet directory doesn't exist, create it with `index.md`
           - Add poem file: `{poet-slug}/{poem-slug}.md`
           - Update poet's `index.md` with link to new poem
           - Update main poetry index if poet is new

      4. **Additional Content Sources**
         - Facebook posts (https://www.facebook.com/khyberadabimalgari/)
         - Other social links or text content.
         - Manual placeholders for upcoming events or poetry submissions.

      5. **Page Structure**
         - Pashto: `docs/poetry/{poet-slug}/{poem-slug}.md`
         - English: `docs/en/poetry/{poet-slug}/{poem-slug}.md`
         - Poet index: `docs/poetry/{poet-slug}/index.md` (lists all poems by that poet)
         - Main poetry index: `docs/poetry/index.md` (lists all poets)
         - Ensure all Markdown is **clean, lightweight, and VitePress-ready**.

      6. **Styling and Format**
         - Pashto content: RTL, proper font placeholder for Scheherazade or Noto Nastaliq.
         - English content: LTR, standard font.
         - Use headings, lists, and blockquotes where appropriate.

      7. **Extras**
         - Include frontmatter tags for poet names, poetry type (Ghazal, Nazm, etc.).
         - Optionally generate `poetry/archives/YYYY-MM.md` linking all posts from that month.
         - Add placeholders for social sharing images: `/public/og/{filename}.png`.

      8. **Output Example**
         
         Main poetry index (`docs/poetry/index.md`):
         ```markdown
         ---
         title: شاعري
         ---
         
         ## شاعران
         
         - [امیر حمزه خان شنواری](./ameer-hamza-khan-shinwari/)
         - [د بل شاعر نوم](./another-poet-slug/)
         ```
         
         Poet index (`docs/poetry/ameer-hamza-khan-shinwari/index.md`):
         ```markdown
         ---
         title: "امیر حمزه خان شنواری"
         ---
         
         ## غزلونه
         
         - [انحصار په خپل خواهش دے](./enhesar-pa-khpal-khwahish-de)
         - [د بل غزل نوم](./another-ghazal-slug)
         ```
         
         Poem file (`docs/poetry/ameer-hamza-khan-shinwari/enhesar-pa-khpal-khwahish-de.md`):
         ```markdown
         ---
         title: "انحصار په خپل خواهش دے"
         date: "2025-01-13"
         author: "امیر حمزه خان شنواری"
         authorEn: "Ameer Hamza Khan Shinwari"
         category: "Poetry"
         tags: ["Ghazal", "Ameer Hamza Khan Shinwari"]
         ---
         
         انحصار په خپل خواهش دے
         نۀ خزان ښۀ نۀ بهار ښۀ
         ...
         ```

      9. **Slug Generation Rules**
         - For poet names: Convert to lowercase, transliterate Pashto to English, replace spaces with hyphens
           - Examples: "امیر حمزه خان شنواری" → "ameer-hamza-khan-shinwari"
         - For poem slugs: Use first 3-5 meaningful words from first line or title
           - Remove common words like "د", "په", "او", "چې" if they appear first
           - Convert to lowercase, transliterate, replace spaces with hyphens
           - Keep slugs short (max 50 characters)
           - Examples: "انحصار په خپل خواهش دے" → "enhesar-pa-khpal-khwahish-de"

      10. **Instructions for Cursor**
         - Always generate **both Pashto and English** files.
         - If content source is missing, use placeholders.
         - Ensure **URL-safe filenames** using the slug rules above.
         - Create poet directory structure if it doesn't exist.
         - Update poet index when adding new poems.
         - Update main poetry index when adding new poets.
         - Include comments in Markdown if any content or media is missing.
